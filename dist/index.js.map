{"version":3,"file":"index.js","sources":["../src/EmbConstant.js","../src/writer/PesWriter.js","../src/reader/PesReader.js","../src/writer/DstWriter.js","../src/supportedFormats.js","../src/reader/DstReader.js"],"sourcesContent":["// # The commands below 0xFF are intended to denote proper commands.\n// # The encodings beyond this is supplying additional information.\n\nexport const COMMAND_MASK = 0x000000ff;\nexport const THREAD_MASK = 0x0000ff00;\nexport const NEEDLE_MASK = 0x00ff0000;\nexport const ORDER_MASK = 0xff000000;\n\nexport const FLAGS_MASK = 0x0000ff00;\n\nexport const NO_COMMAND = -1;\nexport const STITCH = 0;\nexport const JUMP = 1;\nexport const TRIM = 2;\nexport const STOP = 3;\nexport const END = 4;\nexport const COLOR_CHANGE = 5;\nexport const NEEDLE_SET = 9;\nexport const SEQUIN_MODE = 6;\nexport const SEQUIN_EJECT = 7;\nexport const SLOW = 0xb; // # 11\nexport const FAST = 0xc; // # 12\n\n// # Assigns the change sequences, allowing the color change commands to trigger any event.\n// # For these can be processed in some needle, thread, order values to preset or postset the\n// # Underlying change sequence.\nexport const SET_CHANGE_SEQUENCE = 0x10; // # 16\n\n// # Stitch with implied contingency.\nexport const SEW_TO = 0xb0; // # 176\nexport const NEEDLE_AT = 0xb1; // # 177\n\nexport const STITCH_BREAK = 0xe0; // # 224\n\nexport const SEQUENCE_BREAK = 0xe1; // # 225\nexport const COLOR_BREAK = 0xe2; // # 226\n\n// # Middle Level commands.\nexport const TIE_ON = 0xe4; // # 228\nexport const TIE_OFF = 0xe5; // # 229\nexport const FRAME_EJECT = 0xe9; // # 233\n\n// # Matrix Commands.\nexport const MATRIX_TRANSLATE = 0xc0; // # 192\nexport const MATRIX_SCALE_ORIGIN = 0xc1; // # 193\nexport const MATRIX_ROTATE_ORIGIN = 0xc2; // # 194\nexport const MATRIX_SCALE = 0xc4; // # 196\nexport const MATRIX_ROTATE = 0xc5; // # 197\nexport const MATRIX_RESET = 0xc3; // # 195\n\nexport const OPTION_MAX_STITCH_LENGTH = 0xd5;\nexport const OPTION_MAX_JUMP_LENGTH = 0xd6;\nexport const OPTION_EXPLICIT_TRIM = 0xd7;\nexport const OPTION_IMPLICIT_TRIM = 0xd8;\n\nexport const CONTINGENCY_TIE_ON_NONE = 0xd3;\nexport const CONTINGENCY_TIE_ON_THREE_SMALL = 0xd1;\n\nexport const CONTINGENCY_TIE_OFF_NONE = 0xd4;\nexport const CONTINGENCY_TIE_OFF_THREE_SMALL = 0xd2;\n\nexport const CONTINGENCY_LONG_STITCH_NONE = 0xf0;\nexport const CONTINGENCY_LONG_STITCH_JUMP_NEEDLE = 0xf1;\nexport const CONTINGENCY_LONG_STITCH_SEW_TO = 0xf2;\n\nexport const CONTINGENCY_SEQUIN_UTILIZE = 0xf5;\nexport const CONTINGENCY_SEQUIN_JUMP = 0xf6;\nexport const CONTINGENCY_SEQUIN_STITCH = 0xf7;\nexport const CONTINGENCY_SEQUIN_REMOVE = 0xf8;\n\nexport const ALTERNATIVE = 0x100; // # Generic flag for an alternative form.\n","const { CONTINGENCY_SEQUIN_JUMP } = require('../EmbConstant');\n\nconst SEQUIN_CONTINGENCY = CONTINGENCY_SEQUIN_JUMP;\nconst FULL_JUMP = true;\nconst ROUND = true;\nconst MAX_JUMP_DISTANCE = 2047;\nconst MAX_STITCH_DISTANCE = 2047;\n\nconst VERSION_1 = 1.0;\nconst VERSION_6 = 6.0;\n\nconst PES_VERSION_1_SIGNATURE = '#PES0001';\nconst PES_VERSION_6_SIGNATURE = '#PES0060';\n\nconst EMB_ONE = 'CEmbOne';\nconst EMB_SEG = 'CSewSeg';\n\nexports.write = (pattern, f, settings = null) => {\n  //\n};\nexports.write_truncated_version_1 = (pattern, f) => {\n  //\n};\n\nexports.write_truncated_version_6 = (pattern, f) => {\n  //\n};\n\nexports.write_version_1 = (pattern, f) => {\n  //\n};\nexports.write_version_6 = (pattern, f) => {\n  //\n};\n\nexports.write_pes_header_v1 = (f, distinct_block_objects) => {\n  //\n};\n\nexports.write_pes_header_v6 = (pattern, f, chart, distinct_block_objects) => {\n  //\n};\n\nexports.write_pes_addendum = (f, color_info) => {\n  //\n};\n\nexports.write_pes_string_8 = (f, string) => {\n  //\n};\n\nexports.write_pes_string_16 = (f, string) => {\n  //\n};\n\nexports.write_pes_thread = (f, thread) => {\n  //\n};\n\nexports.write_pes_blocks = (f, pattern, chart, left, top, right, bottom, cx, cy) => {\n  //\n};\n\nexports.write_pes_sewsegheader = (f, left, top, right, bottom) => {};\n\nexports.get_as_segments_blocks = (pattern, chart, adjust_x, adjust_y) => {\n  //\n};\n\nexports.write_pes_embsewseg_segments = (f, pattern, chart, left, bottom, cx, cy) => {\n  //\n};\n","export function read(f, out, settings = null) {\n  // ..\n}\n\n// exports.read = (f, out, settings = null) => {\n//   //\n// }\n\n// exports.read_pes_string = (f) => {\n//   //\n// }\n\n// exports.read_pes_metadata = (f, out) => {\n//   //\n// }\n\n// exports.read_pes_thread = (f, threadlist) => {\n//   //\n// }\n\n// exports.read_pes_header_version_1 = (f, out) => {\n//   //\n// }\n\n// exports.read_pes_header_version_4 = (f, out) => {\n//   //\n// }\n\n// exports.read_pes_header_version_5 = (f, out, threadlist) => {\n//   //\n// }\n\n// exports.read_pes_header_version_6 = (f, out, threadlist) => {\n//   //\n// }\n","import { JUMP, CONTINGENCY_SEQUIN_UTILIZE } from '../EmbConstant';\n\nconst SEQUIN_CONTINGENCY = CONTINGENCY_SEQUIN_UTILIZE;\nconst FULL_JUMP = False;\nconst ROUND = True;\nconst MAX_JUMP_DISTANCE = 121;\nconst MAX_STITCH_DISTANCE = 121;\n\nconst PPMM = 10;\nconst DSTHEADERSIZE = 512;\n\nexport default function write(pattern, f, settings) {}\n","import * as PesWriter from './writer/PesWriter';\nimport * as PesReader from './reader/PesReader';\nimport * as DstWriter from './writer/DstWriter';\nimport * as DstReader from './reader/DstReader';\n\n/** @typedef {Object}  ISupported\n *  @property {String} description\n *  @property {String} extension\n *  @property {String} mimetype\n *  @property {String} category\n *  @property {Object} reader\n *  @property {Object} writer\n *  @property {Array<Number>} versions\n *  @property {Array<String>} metadata\n */\n\n/**\n * @constant {Array<ISupported>} supportedFormats\n */\nexport const supportedFormats = [\n  {\n    description: 'Brother Embroidery Format',\n    extension: 'pes',\n    extensions: ['pes'],\n    mimetype: 'application/x-pes',\n    category: 'embroidery',\n    reader: PesReader,\n    writer: PesWriter,\n    versions: ['1', '6', '1t', '6t'],\n    metadata: ['name', 'author', 'category', 'keywords', 'comments'],\n  },\n  {\n    description: 'Tajima Embroidery Format',\n    extension: 'dst',\n    extensions: ['dst'],\n    mimetype: 'application/x-dst',\n    category: 'embroidery',\n    reader: DstReader,\n    writer: DstWriter,\n    read_options: {\n      trim_distance: [null, 3.0, 50.0],\n      trim_at: [2, 3, 4, 5, 6, 7, 8],\n      clipping: [true, false],\n    },\n    write_options: {\n      trim_at: [2, 3, 4, 5, 6, 7, 8],\n    },\n    versions: ['default', 'extended'],\n    metadata: ['name', 'author', 'copyright'],\n  },\n];\n\n/**\n * @function getSupportedFormats\n * @param {String} extension\n * @return {ISupported}\n */\nexport function getSupportedFormats(extension) {\n  for (let i = 0; i < supportedFormats.length; i++) {\n    const supported = supportedFormats[i];\n    if (extension === supported.extension) {\n      return supported;\n    }\n  }\n  return false;\n}\n","export function read() {\n  // ...\n}\n"],"names":["CONTINGENCY_SEQUIN_JUMP","pattern","f","distinct_block_objects","chart","color_info","string","thread","left","top","right","bottom","cx","cy","adjust_x","adjust_y","out","False","True","settings","supportedFormats","description","extension","extensions","mimetype","category","reader","PesReader","writer","PesWriter","versions","metadata","DstWriter","read_options","trim_distance","trim_at","clipping","write_options"],"mappings":"+GAG4B,gBACD,kBACA,oBACD,sBAEA,kBAEC,SACL,OACF,OACA,OACA,MACD,eACS,aACF,cACC,eACC,OACR,QACA,uBAKe,UAGb,cACG,iBAEG,mBAEE,gBACH,WAGL,YACC,gBACI,qBAGK,wBACG,yBACC,iBACR,kBACC,iBACD,6BAEY,2BACF,yBACF,yBACA,4BAEG,mCACO,6BAEN,oCACO,iCAEH,wCACO,mCACL,+BAEJ,4BACH,8BACE,8BACA,gBAEd,MCtEnBA,wBDGD,MCcS,SAACC,EAASC,OAGU,SAACD,EAASC,OAIV,SAACD,EAASC,OAIpB,SAACD,EAASC,OAGV,SAACD,EAASC,OAIN,SAACA,EAAGC,OAIJ,SAACF,EAASC,EAAGE,EAAOD,OAIrB,SAACD,EAAGG,OAIJ,SAACH,EAAGI,OAIH,SAACJ,EAAGI,OAIP,SAACJ,EAAGK,OAIJ,SAACL,EAAGD,EAASG,EAAOI,EAAMC,EAAKC,EAAOC,EAAQC,EAAIC,OAI5C,SAACX,EAAGM,EAAMC,EAAKC,EAAOC,OAEtB,SAACV,EAASG,EAAOU,EAAUC,OAIrB,SAACb,EAAGD,EAASG,EAAOI,EAAMG,EAAQC,EAAIC,8vBCrEtE,SAAcX,EAAGc,OCGNC,MACJC,iDAOC,SAAejB,EAASC,EAAGiB,WCQ7BC,EAAmB,CAC9B,CACEC,YAAa,4BACbC,UAAW,MACXC,WAAY,CAAC,OACbC,SAAU,oBACVC,SAAU,aACVC,OAAQC,EACRC,OAAQC,EACRC,SAAU,CAAC,IAAK,IAAK,KAAM,MAC3BC,SAAU,CAAC,OAAQ,SAAU,WAAY,WAAY,aAEvD,CACEV,YAAa,2BACbC,UAAW,MACXC,WAAY,CAAC,OACbC,SAAU,oBACVC,SAAU,aACVC,0CCrCG,eDsCHE,OAAQI,EACRC,aAAc,CACZC,cAAe,CAAC,KAAM,EAAK,IAC3BC,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5BC,SAAU,EAAC,GAAM,IAEnBC,cAAe,CACbF,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAE9BL,SAAU,CAAC,UAAW,YACtBC,SAAU,CAAC,OAAQ,SAAU"}