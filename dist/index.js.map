{"version":3,"file":"index.js","sources":["../src/EmbConstant.js","../src/writer/PesWriter.js","../src/reader/PesReader.js","../src/writer/DstWriter.js","../src/supportedFormats.js","../src/reader/DstReader.js"],"sourcesContent":["// # The commands below 0xFF are intended to denote proper commands.\r\n// # The encodings beyond this is supplying additional information.\r\n\r\nexport const COMMAND_MASK = 0x000000ff;\r\nexport const THREAD_MASK = 0x0000ff00;\r\nexport const NEEDLE_MASK = 0x00ff0000;\r\nexport const ORDER_MASK = 0xff000000;\r\n\r\nexport const FLAGS_MASK = 0x0000ff00;\r\n\r\nexport const NO_COMMAND = -1;\r\nexport const STITCH = 0;\r\nexport const JUMP = 1;\r\nexport const TRIM = 2;\r\nexport const STOP = 3;\r\nexport const END = 4;\r\nexport const COLOR_CHANGE = 5;\r\nexport const NEEDLE_SET = 9;\r\nexport const SEQUIN_MODE = 6;\r\nexport const SEQUIN_EJECT = 7;\r\nexport const SLOW = 0xb; // # 11\r\nexport const FAST = 0xc; // # 12\r\n\r\n// # Assigns the change sequences, allowing the color change commands to trigger any event.\r\n// # For these can be processed in some needle, thread, order values to preset or postset the\r\n// # Underlying change sequence.\r\nexport const SET_CHANGE_SEQUENCE = 0x10; // # 16\r\n\r\n// # Stitch with implied contingency.\r\nexport const SEW_TO = 0xb0; // # 176\r\nexport const NEEDLE_AT = 0xb1; // # 177\r\n\r\nexport const STITCH_BREAK = 0xe0; // # 224\r\n\r\nexport const SEQUENCE_BREAK = 0xe1; // # 225\r\nexport const COLOR_BREAK = 0xe2; // # 226\r\n\r\n// # Middle Level commands.\r\nexport const TIE_ON = 0xe4; // # 228\r\nexport const TIE_OFF = 0xe5; // # 229\r\nexport const FRAME_EJECT = 0xe9; // # 233\r\n\r\n// # Matrix Commands.\r\nexport const MATRIX_TRANSLATE = 0xc0; // # 192\r\nexport const MATRIX_SCALE_ORIGIN = 0xc1; // # 193\r\nexport const MATRIX_ROTATE_ORIGIN = 0xc2; // # 194\r\nexport const MATRIX_SCALE = 0xc4; // # 196\r\nexport const MATRIX_ROTATE = 0xc5; // # 197\r\nexport const MATRIX_RESET = 0xc3; // # 195\r\n\r\nexport const OPTION_MAX_STITCH_LENGTH = 0xd5;\r\nexport const OPTION_MAX_JUMP_LENGTH = 0xd6;\r\nexport const OPTION_EXPLICIT_TRIM = 0xd7;\r\nexport const OPTION_IMPLICIT_TRIM = 0xd8;\r\n\r\nexport const CONTINGENCY_TIE_ON_NONE = 0xd3;\r\nexport const CONTINGENCY_TIE_ON_THREE_SMALL = 0xd1;\r\n\r\nexport const CONTINGENCY_TIE_OFF_NONE = 0xd4;\r\nexport const CONTINGENCY_TIE_OFF_THREE_SMALL = 0xd2;\r\n\r\nexport const CONTINGENCY_LONG_STITCH_NONE = 0xf0;\r\nexport const CONTINGENCY_LONG_STITCH_JUMP_NEEDLE = 0xf1;\r\nexport const CONTINGENCY_LONG_STITCH_SEW_TO = 0xf2;\r\n\r\nexport const CONTINGENCY_SEQUIN_UTILIZE = 0xf5;\r\nexport const CONTINGENCY_SEQUIN_JUMP = 0xf6;\r\nexport const CONTINGENCY_SEQUIN_STITCH = 0xf7;\r\nexport const CONTINGENCY_SEQUIN_REMOVE = 0xf8;\r\n\r\nexport const ALTERNATIVE = 0x100; // # Generic flag for an alternative form.\r\n","const { CONTINGENCY_SEQUIN_JUMP } = require('../EmbConstant');\r\n\r\nconst SEQUIN_CONTINGENCY = CONTINGENCY_SEQUIN_JUMP;\r\nconst FULL_JUMP = true;\r\nconst ROUND = true;\r\nconst MAX_JUMP_DISTANCE = 2047;\r\nconst MAX_STITCH_DISTANCE = 2047;\r\n\r\nconst VERSION_1 = 1.0;\r\nconst VERSION_6 = 6.0;\r\n\r\nconst PES_VERSION_1_SIGNATURE = '#PES0001';\r\nconst PES_VERSION_6_SIGNATURE = '#PES0060';\r\n\r\nconst EMB_ONE = 'CEmbOne';\r\nconst EMB_SEG = 'CSewSeg';\r\n\r\nexports.write = (pattern, f, settings = null) => {\r\n  //\r\n};\r\nexports.write_truncated_version_1 = (pattern, f) => {\r\n  //\r\n};\r\n\r\nexports.write_truncated_version_6 = (pattern, f) => {\r\n  //\r\n};\r\n\r\nexports.write_version_1 = (pattern, f) => {\r\n  //\r\n};\r\nexports.write_version_6 = (pattern, f) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_header_v1 = (f, distinct_block_objects) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_header_v6 = (pattern, f, chart, distinct_block_objects) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_addendum = (f, color_info) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_string_8 = (f, string) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_string_16 = (f, string) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_thread = (f, thread) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_blocks = (f, pattern, chart, left, top, right, bottom, cx, cy) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_sewsegheader = (f, left, top, right, bottom) => {};\r\n\r\nexports.get_as_segments_blocks = (pattern, chart, adjust_x, adjust_y) => {\r\n  //\r\n};\r\n\r\nexports.write_pes_embsewseg_segments = (f, pattern, chart, left, bottom, cx, cy) => {\r\n  //\r\n};\r\n","export function read(f, out, settings = null) {\r\n  // ..\r\n}\r\n\r\n// exports.read = (f, out, settings = null) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_string = (f) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_metadata = (f, out) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_thread = (f, threadlist) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_header_version_1 = (f, out) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_header_version_4 = (f, out) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_header_version_5 = (f, out, threadlist) => {\r\n//   //\r\n// }\r\n\r\n// exports.read_pes_header_version_6 = (f, out, threadlist) => {\r\n//   //\r\n// }\r\n","import { JUMP, CONTINGENCY_SEQUIN_UTILIZE } from '../EmbConstant';\r\n\r\nconst SEQUIN_CONTINGENCY = CONTINGENCY_SEQUIN_UTILIZE;\r\nconst FULL_JUMP = False;\r\nconst ROUND = True;\r\nconst MAX_JUMP_DISTANCE = 121;\r\nconst MAX_STITCH_DISTANCE = 121;\r\n\r\nconst PPMM = 10;\r\nconst DSTHEADERSIZE = 512;\r\n\r\nexport default function write(pattern, f, settings) {}\r\n","import * as PesWriter from './writer/PesWriter';\r\nimport * as PesReader from './reader/PesReader';\r\nimport * as DstWriter from './writer/DstWriter';\r\nimport * as DstReader from './reader/DstReader';\r\n\r\n/** @typedef {Object}  ISupported\r\n *  @property {String} description\r\n *  @property {String} extension\r\n *  @property {String} mimetype\r\n *  @property {String} category\r\n *  @property {Object} reader\r\n *  @property {Object} writer\r\n *  @property {Array<Number>} versions\r\n *  @property {Array<String>} metadata\r\n */\r\n\r\n/**\r\n * @constant {Array<ISupported>} supportedFormats\r\n */\r\nexport const supportedFormats = [\r\n  {\r\n    description: 'Brother Embroidery Format',\r\n    extension: 'pes',\r\n    extensions: ['pes'],\r\n    mimetype: 'application/x-pes',\r\n    category: 'embroidery',\r\n    reader: PesReader,\r\n    writer: PesWriter,\r\n    versions: ['1', '6', '1t', '6t'],\r\n    metadata: ['name', 'author', 'category', 'keywords', 'comments'],\r\n  },\r\n  {\r\n    description: 'Tajima Embroidery Format',\r\n    extension: 'dst',\r\n    extensions: ['dst'],\r\n    mimetype: 'application/x-dst',\r\n    category: 'embroidery',\r\n    reader: DstReader,\r\n    writer: DstWriter,\r\n    read_options: {\r\n      trim_distance: [null, 3.0, 50.0],\r\n      trim_at: [2, 3, 4, 5, 6, 7, 8],\r\n      clipping: [true, false],\r\n    },\r\n    write_options: {\r\n      trim_at: [2, 3, 4, 5, 6, 7, 8],\r\n    },\r\n    versions: ['default', 'extended'],\r\n    metadata: ['name', 'author', 'copyright'],\r\n  },\r\n];\r\n\r\n/**\r\n * @function getSupportedFormats\r\n * @param {String} extension\r\n * @return {ISupported}\r\n */\r\nexport function getSupportedFormats(extension) {\r\n  for (let i = 0; i < supportedFormats.length; i++) {\r\n    const supported = supportedFormats[i];\r\n    if (extension === supported.extension) {\r\n      return supported;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n","export function read() {\r\n  // ...\r\n}\r\n"],"names":["CONTINGENCY_SEQUIN_JUMP","pattern","f","distinct_block_objects","chart","color_info","string","thread","left","top","right","bottom","cx","cy","adjust_x","adjust_y","out","False","True","settings","supportedFormats","description","extension","extensions","mimetype","category","reader","PesReader","writer","PesWriter","versions","metadata","DstWriter","read_options","trim_distance","trim_at","clipping","write_options"],"mappings":"+GAG4B,gBACD,kBACA,oBACD,sBAEA,kBAEC,SACL,OACF,OACA,OACA,MACD,eACS,aACF,cACC,eACC,OACR,QACA,uBAKe,UAGb,cACG,iBAEG,mBAEE,gBACH,WAGL,YACC,gBACI,qBAGK,wBACG,yBACC,iBACR,kBACC,iBACD,6BAEY,2BACF,yBACF,yBACA,4BAEG,mCACO,6BAEN,oCACO,iCAEH,wCACO,mCACL,+BAEJ,4BACH,8BACE,8BACA,gBAEd,MCtEnBA,wBDGD,MCcS,SAACC,EAASC,OAGU,SAACD,EAASC,OAIV,SAACD,EAASC,OAIpB,SAACD,EAASC,OAGV,SAACD,EAASC,OAIN,SAACA,EAAGC,OAIJ,SAACF,EAASC,EAAGE,EAAOD,OAIrB,SAACD,EAAGG,OAIJ,SAACH,EAAGI,OAIH,SAACJ,EAAGI,OAIP,SAACJ,EAAGK,OAIJ,SAACL,EAAGD,EAASG,EAAOI,EAAMC,EAAKC,EAAOC,EAAQC,EAAIC,OAI5C,SAACX,EAAGM,EAAMC,EAAKC,EAAOC,OAEtB,SAACV,EAASG,EAAOU,EAAUC,OAIrB,SAACb,EAAGD,EAASG,EAAOI,EAAMG,EAAQC,EAAIC,8vBCrEtE,SAAcX,EAAGc,OCGNC,MACJC,iDAOC,SAAejB,EAASC,EAAGiB,WCQ7BC,EAAmB,CAC9B,CACEC,YAAa,4BACbC,UAAW,MACXC,WAAY,CAAC,OACbC,SAAU,oBACVC,SAAU,aACVC,OAAQC,EACRC,OAAQC,EACRC,SAAU,CAAC,IAAK,IAAK,KAAM,MAC3BC,SAAU,CAAC,OAAQ,SAAU,WAAY,WAAY,aAEvD,CACEV,YAAa,2BACbC,UAAW,MACXC,WAAY,CAAC,OACbC,SAAU,oBACVC,SAAU,aACVC,0CCrCG,eDsCHE,OAAQI,EACRC,aAAc,CACZC,cAAe,CAAC,KAAM,EAAK,IAC3BC,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5BC,SAAU,EAAC,GAAM,IAEnBC,cAAe,CACbF,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAE9BL,SAAU,CAAC,UAAW,YACtBC,SAAU,CAAC,OAAQ,SAAU"}